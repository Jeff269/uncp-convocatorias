{"ast":null,"code":"import _asyncToGenerator from \"C:\\\\xampp\\\\htdocs\\\\www\\\\SISConvocatorias\\\\frontend\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\asyncToGenerator.js\";\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"./auth.service\";\nimport * as i2 from \"@angular/router\";\nexport class AuthGuard {\n  constructor(auth, router) {\n    this.auth = auth;\n    this.router = router;\n  }\n\n  canActivate() {\n    var _this = this;\n\n    return _asyncToGenerator(function* () {\n      return true;\n      yield _this.auth.intranet_validarLoginPromise().then(res => {\n        //console.log(res)\n        if (res.code == 200) {\n          //console.log(res)\n          //console.log(\"token valido\");\n          return true;\n        } else {\n          if (res.code == 300) {\n            _this.router.navigate(['/login']);\n\n            return false;\n          } else {\n            if (res.code == 404) {\n              console.log(\"token invalido\");\n\n              _this.auth.intranet_removeToken();\n\n              _this.router.navigate(['/login']); //this.router.navigate(['/login.php']);\n\n\n              return false;\n            } else {\n              console.log(\"error con la base de datos\");\n\n              _this.auth.intranet_removeToken();\n\n              _this.router.navigate(['/login']);\n\n              return false;\n            }\n          }\n        }\n      });\n      return true;\n    })();\n  }\n\n  canActivateChild() {\n    return true;\n  }\n\n}\n\nAuthGuard.ɵfac = function AuthGuard_Factory(t) {\n  return new (t || AuthGuard)(i0.ɵɵinject(i1.AuthService), i0.ɵɵinject(i2.Router));\n};\n\nAuthGuard.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n  token: AuthGuard,\n  factory: AuthGuard.ɵfac,\n  providedIn: 'root'\n});","map":{"version":3,"sources":["C:/xampp/htdocs/www/SISConvocatorias/frontend/src/app/auth.guard.ts"],"names":["i0","i1","i2","AuthGuard","constructor","auth","router","canActivate","intranet_validarLoginPromise","then","res","code","navigate","console","log","intranet_removeToken","canActivateChild","ɵfac","AuthGuard_Factory","t","ɵɵinject","AuthService","Router","ɵprov","ɵɵdefineInjectable","token","factory","providedIn"],"mappings":";AAAA,OAAO,KAAKA,EAAZ,MAAoB,eAApB;AACA,OAAO,KAAKC,EAAZ,MAAoB,gBAApB;AACA,OAAO,KAAKC,EAAZ,MAAoB,iBAApB;AACA,OAAO,MAAMC,SAAN,CAAgB;AACnBC,EAAAA,WAAW,CAACC,IAAD,EAAOC,MAAP,EAAe;AACtB,SAAKD,IAAL,GAAYA,IAAZ;AACA,SAAKC,MAAL,GAAcA,MAAd;AACH;;AACKC,EAAAA,WAAW,GAAG;AAAA;;AAAA;AAChB,aAAO,IAAP;AACA,YAAM,KAAI,CAACF,IAAL,CAAUG,4BAAV,GAAyCC,IAAzC,CAA8CC,GAAG,IAAI;AACvD;AACA,YAAIA,GAAG,CAACC,IAAJ,IAAY,GAAhB,EAAqB;AACjB;AACA;AACA,iBAAO,IAAP;AACH,SAJD,MAKK;AACD,cAAID,GAAG,CAACC,IAAJ,IAAY,GAAhB,EAAqB;AACjB,YAAA,KAAI,CAACL,MAAL,CAAYM,QAAZ,CAAqB,CAAC,QAAD,CAArB;;AACA,mBAAO,KAAP;AACH,WAHD,MAIK;AACD,gBAAIF,GAAG,CAACC,IAAJ,IAAY,GAAhB,EAAqB;AACjBE,cAAAA,OAAO,CAACC,GAAR,CAAY,gBAAZ;;AACA,cAAA,KAAI,CAACT,IAAL,CAAUU,oBAAV;;AACA,cAAA,KAAI,CAACT,MAAL,CAAYM,QAAZ,CAAqB,CAAC,QAAD,CAArB,EAHiB,CAIjB;;;AACA,qBAAO,KAAP;AACH,aAND,MAOK;AACDC,cAAAA,OAAO,CAACC,GAAR,CAAY,4BAAZ;;AACA,cAAA,KAAI,CAACT,IAAL,CAAUU,oBAAV;;AACA,cAAA,KAAI,CAACT,MAAL,CAAYM,QAAZ,CAAqB,CAAC,QAAD,CAArB;;AACA,qBAAO,KAAP;AACH;AACJ;AACJ;AACJ,OA5BK,CAAN;AA6BA,aAAO,IAAP;AA/BgB;AAgCnB;;AACDI,EAAAA,gBAAgB,GAAG;AACf,WAAO,IAAP;AACH;;AAxCkB;;AA0CvBb,SAAS,CAACc,IAAV,GAAiB,SAASC,iBAAT,CAA2BC,CAA3B,EAA8B;AAAE,SAAO,KAAKA,CAAC,IAAIhB,SAAV,EAAqBH,EAAE,CAACoB,QAAH,CAAYnB,EAAE,CAACoB,WAAf,CAArB,EAAkDrB,EAAE,CAACoB,QAAH,CAAYlB,EAAE,CAACoB,MAAf,CAAlD,CAAP;AAAmF,CAApI;;AACAnB,SAAS,CAACoB,KAAV,GAAkB,aAAcvB,EAAE,CAACwB,kBAAH,CAAsB;AAAEC,EAAAA,KAAK,EAAEtB,SAAT;AAAoBuB,EAAAA,OAAO,EAAEvB,SAAS,CAACc,IAAvC;AAA6CU,EAAAA,UAAU,EAAE;AAAzD,CAAtB,CAAhC","sourcesContent":["import * as i0 from \"@angular/core\";\r\nimport * as i1 from \"./auth.service\";\r\nimport * as i2 from \"@angular/router\";\r\nexport class AuthGuard {\r\n    constructor(auth, router) {\r\n        this.auth = auth;\r\n        this.router = router;\r\n    }\r\n    async canActivate() {\r\n        return true;\r\n        await this.auth.intranet_validarLoginPromise().then(res => {\r\n            //console.log(res)\r\n            if (res.code == 200) {\r\n                //console.log(res)\r\n                //console.log(\"token valido\");\r\n                return true;\r\n            }\r\n            else {\r\n                if (res.code == 300) {\r\n                    this.router.navigate(['/login']);\r\n                    return false;\r\n                }\r\n                else {\r\n                    if (res.code == 404) {\r\n                        console.log(\"token invalido\");\r\n                        this.auth.intranet_removeToken();\r\n                        this.router.navigate(['/login']);\r\n                        //this.router.navigate(['/login.php']);\r\n                        return false;\r\n                    }\r\n                    else {\r\n                        console.log(\"error con la base de datos\");\r\n                        this.auth.intranet_removeToken();\r\n                        this.router.navigate(['/login']);\r\n                        return false;\r\n                    }\r\n                }\r\n            }\r\n        });\r\n        return true;\r\n    }\r\n    canActivateChild() {\r\n        return true;\r\n    }\r\n}\r\nAuthGuard.ɵfac = function AuthGuard_Factory(t) { return new (t || AuthGuard)(i0.ɵɵinject(i1.AuthService), i0.ɵɵinject(i2.Router)); };\r\nAuthGuard.ɵprov = /*@__PURE__*/ i0.ɵɵdefineInjectable({ token: AuthGuard, factory: AuthGuard.ɵfac, providedIn: 'root' });\r\n"]},"metadata":{},"sourceType":"module"}